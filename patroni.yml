scope: highload-cluster

etcd3:
  hosts:
    - etcd:2379
  protocol: http

bootstrap:
  dcs:
    ttl: 10
    loop_wait: 2
    retry_timeout: 10
    maximum_lag_on_failover: 1048576
    postgresql:
      pg_hba:
        - local all all trust
        - host all all 0.0.0.0/0 md5
        - host replication replicator 0.0.0.0/0 md5
      use_pg_rewind: true
      parameters:
        synchronous_commit: "on"
        synchronous_standby_names: 'ANY 1 (*)'
        shared_buffers: '1GB'
        work_mem: '32MB'
        maintenance_work_mem: '256MB'
        effective_cache_size: '3GB'
        max_connections: '100'
        wal_level: 'logical'
        checkpoint_completion_target: '0.9'
        random_page_cost: '1.1'
        log_min_duration_statement: '200ms'

postgresql:
  use_pg_rewind: true
  listen: 0.0.0.0:5432
  data_dir: /home/postgres/pgdata/pgroot
  bin_dir: /usr/lib/postgresql/17/bin
  pgpass: /tmp/pgpass
  authentication:
    replication:
      username: replicator
      password: "pass"
    superuser:
      username: highload-user
      password: "12345678"
    parameters:
      unix_socket_directories: '/tmp'

restapi:
  listen: 0.0.0.0:8008